{
  "information": {
    "name": "devices/additions",
    "description": "Cumulocity device additions",
    "descriptionLong": "REST endpoint to interact with Cumulocity device additions",
    "link": "https://cumulocity.com/guides/reference/inventory/"
  },
  "endpoints": [
    {
      "name": "newManagedObjectChildAddition",
      "method": "POST",
      "path": "inventory/managedObjects/{device}/childAdditions",
      "accept": "application/vnd.com.nsn.cumulocity.managedObjectReference+json",
      "collectionType": "application/vnd.com.nsn.cumulocity.managedObject+json",
      "description": "Assign child addition",
      "descriptionLong": "Create a child addition reference to an existing device",
      "collectionProperty": "managedObject",
      "alias": {
        "go": "assign",
        "powershell": "Add-ChildAdditionToDevice"
      },
      "examples": {
        "powershell": [
          {
            "description": "Assign a managed object as a child addition to an existing device",
            "beforeEach": [
              "$Device = PSc8y\\New-TestDevice",
              "$ChildDevice = PSc8y\\New-TestDevice"
            ],
            "command": "Add-ChildDeviceToDevice -Device $Device.id -Child $ChildDevice.id",
            "afterEach": [
              "PSc8y\\Remove-ManagedObject -Id $ChildDevice.id",
              "PSc8y\\Remove-ManagedObject -Id $Device.id"
            ]
          },
          {
            "description": "Assign a managed object as a child addition to an existing device (using pipeline)",
            "beforeEach": [
              "$Device = PSc8y\\New-TestDevice",
              "$ChildDevice = PSc8y\\New-TestDevice"
            ],
            "command": "Get-ManagedObject -Id $ChildDevice.id | Add-ChildDeviceToDevice -Device $Device.id",
            "afterEach": [
              "PSc8y\\Remove-ManagedObject -Id $Device.id",
              "PSc8y\\Remove-ManagedObject -Id $ChildDevice.id"
            ]
          }
        ],
        "go": [
          {
            "description": "Assign a managed object as a child addition to an existing device",
            "command": "c8y devices additions assign --device 12345 --child 44235"
          }
        ]
      },
      "pathParameters": [
        {
          "name": "device",
          "type": "[]device",
          "required": true,
          "description": "Device."
        }
      ],
      "body": [
        {
          "name": "child",
          "type": "[]device",
          "required": true,
          "pipeline": true,
          "property": "managedObject.id",
          "description": "New child addition"
        }
      ]
    },
    {
      "name": "deleteManagedObjectChildAdditionReference",
      "description": "Delete child addition reference",
      "descriptionLong": "Delete child addition reference",
      "method": "DELETE",
      "path": "inventory/managedObjects/{device}/childAdditions/{child}",
      "accept": "",
      "alias": {
        "go": "unassign",
        "powershell": "Remove-ChildDeviceFromDevice"
      },
      "examples": {
        "powershell": [
          {
            "description": "Unassign a child device from its parent device",
            "beforeEach": [
              "$Device = PSc8y\\New-TestDevice",
              "$ChildDevice = PSc8y\\New-TestDevice",
              "PSc8y\\Add-ChildDeviceToDevice -Device $Device.id -NewChild $ChildDevice.id"
            ],
            "command": "Remove-ChildDeviceFromDevice -Device $Device.id -ChildDevice $ChildDevice.id",
            "afterEach": [
              "PSc8y\\Remove-ManagedObject -Id $ChildDevice.id",
              "PSc8y\\Remove-ManagedObject -Id $Device.id"
            ]
          }
        ],
        "go": [
          {
            "description": "Unassign a child device from its parent device",
            "command": "c8y devices additions unassign --device 12345 --child 22553"
          }
        ]
      },
      "pathParameters": [
        {
          "name": "device",
          "type": "[]device",
          "required": true,
          "description": "ManagedObject id"
        },
        {
          "name": "child",
          "type": "[]device",
          "required": true,
          "pipeline": true,
          "description": "Child addition reference"
        }
      ]
    },
    {
      "name": "getManagedObjectChildAdditionReference",
      "description": "Get child addition reference",
      "descriptionLong": "Get managed object child device reference",
      "method": "GET",
      "path": "inventory/managedObjects/{device}/childAdditions/{child}",
      "accept": "application/vnd.com.nsn.cumulocity.managedObjectReference+json",
      "alias": {
        "go": "get",
        "powershell": "Get-ChildDeviceReference"
      },
      "examples": {
        "powershell": [
          {
            "description": "Get an existing child device reference",
            "beforeEach": [
              "$Agent = New-TestAgent",
              "$Device = New-TestDevice",
              "$Ref = Add-ChildDeviceToDevice -Device $Agent.id -NewChild $Device.id"
            ],
            "command": "Get-ChildDeviceReference -Device $Agent.id -Child $Ref.id",
            "afterEach": [
              "Remove-ManagedObject -Id $Device.id",
              "Remove-ManagedObject -Id $Agent.id"
            ]
          }
        ],
        "go": [
          {
            "description": "Get an existing child device reference",
            "command": "c8y devices additions get --device 12345 --child 12345"
          }
        ]
      },
      "pathParameters": [
        {
          "name": "device",
          "type": "[]device",
          "pipeline": true,
          "required": true,
          "description": "ManagedObject id"
        },
        {
          "name": "child",
          "type": "[]device",
          "required": true,
          "description": "Device reference id"
        }
      ]
    },
    {
      "name": "listChildAdditionCollection",
      "method": "GET",
      "description": "Get child addition collection",
      "descriptionLong": "Get a collection of managedObjects child references",
      "path": "inventory/managedObjects/{device}/childAdditions",
      "accept": "application/vnd.com.nsn.cumulocity.managedObjectReferenceCollection+json",
      "collectionType": "application/vnd.com.nsn.cumulocity.managedObject+json",
      "collectionProperty": "references.#.managedObject",
      "alias": {
        "go": "list",
        "powershell": "Get-DeviceChildAdditionCollection"
      },
      "examples": {
        "powershell": [
          {
            "description": "Get a list of the child additions of an existing device",
            "command": "Get-DeviceChildAdditionCollection -Device agentAdditionInfo01"
          },
          {
            "description": "List child additions of a device but filter the children using a custom query",
            "command": "\"agentAdditionInfo01\" | Get-DeviceChildAdditionCollection -Query \"type eq 'custom*'\"\n"
          }
        ],
        "go": [
          {
            "description": "Get a list of the child additions of an existing device",
            "command": "c8y devices additions list --device 12345"
          },
          {
            "description": "List child additions of a device but filter the children using a custom query",
            "command": "c8y devices additions list --device 12345 --query \"type eq 'custom*'\"",
            "skipTest": true
          }
        ]
      },
      "pathParameters": [
        {
          "name": "device",
          "type": "[]device",
          "pipeline": true,
          "required": true,
          "description": "Device."
        }
      ],
      "queryParameters": [
        {
          "name": "query",
          "description": "Query expression group",
          "property": "query",
          "type": "queryExpression",
          "children": [
            {
              "name": "query",
              "type": "string",
              "description": "Additional query filter",
              "format": "(%s)"
            },
            {
              "name": "queryTemplate",
              "type": "string",
              "description": "String template to be used when applying the given query. Use %s to reference the query/pipeline input"
            },
            {
              "name": "orderBy",
              "type": "string",
              "description": "Order by. e.g. _id asc or name asc or creationTime.date desc"
            }
          ]
        },
        {
          "name": "withChildren",
          "type": "boolean",
          "description": "Determines if children with ID and name should be returned when fetching the managed object."
        }
      ]
    }
  ]
}
