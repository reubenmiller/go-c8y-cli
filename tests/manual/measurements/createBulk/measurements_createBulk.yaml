# yaml-language-server: $schema=https://raw.githubusercontent.com/reubenmiller/commander/feat/handle-nested-files/schema.json

config:
    env:
        C8Y_SETTINGS_DEFAULTS_CACHE: true
        C8Y_SETTINGS_CACHE_METHODS: GET POST PUT
        C8Y_SETTINGS_DEFAULTS_CACHETTL: 100h
        C8Y_SETTINGS_DEFAULTS_DRYFORMAT: json

tests:
    ? It creates multiple measurements using bulk API via pipeline but can override the device source id
    : command: cat manual/measurements/create/measurements.list.jsonl | c8y measurements createBulk --dry --device 11111 --batchSize 10 --type customTypeP
      exit-code: 0
      stdout:
          line-count: 1
          json:
              ..0.body.measurements.0.source.id: "11111"
              ..0.body.measurements.0.BEARING_TEMPERATURE_1.Default.interval: "300"
              ..0.body.measurements.0.type: "customTypeP"
              ..0.body.measurements.1.source.id: "11111"
              ..0.body.measurements.1.SUMP_OIL_TEMPERATURE.Default.interval: "300"
              ..0.body.measurements.1.type: "customTypeP"
